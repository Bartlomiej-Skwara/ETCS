cmake_minimum_required (VERSION 3.14)
project (ETCS)
set(CMAKE_CXX_STANDARD 17)
option(ETCS_VENDORED "Use vendored libraries" ON)
option(SIMRAIL "SimRail" OFF)
if (ETCS_VENDORED)
    set(SDL2TTF_VENDORED ON CACHE BOOL "Vendored TTF libs")
    add_subdirectory(libs/SDL EXCLUDE_FROM_ALL)
    add_subdirectory(libs/SDL_ttf EXCLUDE_FROM_ALL)
    add_subdirectory(libs/liborts EXCLUDE_FROM_ALL)
endif()
if (SIMRAIL)
	add_definitions(-DSIMRAIL)
	if(${CMAKE_EXE_LINKER_FLAGS} STREQUAL "/machine:x64")
		set (ARCH "x64")
	else()
		set (ARCH "x86")
	endif()
	set(cppzmq_LIBRARY ${cppzmq_LIBRARY} "${CMAKE_SOURCE_DIR}/libs/cppzmq/lib/${ARCH}/libzmq.lib")
	set(cppzmq_INCLUDE_DIR ${cppzmq_INCLUDE_DIR} "${CMAKE_SOURCE_DIR}/libs/cppzmq/include")
endif()
add_subdirectory(EVC)
add_subdirectory(DMI)
